<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../style/player.css" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <title>캐릭캐릭뮤직체인지</title>
  </head>
  <body>
    <!--ASMR music list-->
    <audio
      id="school"
      autoplay
      loop
      src="../assets/school.mp3"
      type="audio/mpeg"
    ></audio>
    <audio
      id="rain"
      autoplay
      loop
      src="../assets/rain.mp3"
      type="audio/mpeg"
    ></audio>
    <audio
      id="wave"
      autoplay
      loop
      src="../assets/wave.mp3"
      type="audio/mpeg"
    ></audio>
    <!-- Style change sample music -->
    <audio
    id="kpop-sample"
    autoplay
    loop
    src="../assets/Ghost of the wind.mp3"
    type="audio/mpeg">
    </audio>

    <!--inside of player room-->
    <div class="player-room">
      <div class="sample-text">플레이어 도트 그래픽 영역</div>
      <img class="sample-room" src="../assets/sample room.png" width="600" height="500">

      <!--ASMR sound btn-->
      <img src="../assets/window1.png" id="window" width="25%" height="25%" />
      <!--audio effect popup btn-->
      <a href="javascript:openPop()">
        <div>
          <img
            src="../assets/audio_effect_btn.png"
            id="window"
            width="25%"
            height="25%"
          />
        </div>
      </a>

    <!--midi input file-->
    <a href="#pop_info_1" class="btn_open">
        <div>
            <img
              src="https://media.istockphoto.com/id/1393088744/ko/%EB%B2%A1%ED%84%B0/%ED%9D%B0%EC%83%89-%EB%B0%B0%EA%B2%BD%EC%97%90-%EB%91%A5%EA%B7%BC-%EB%B6%84%ED%99%8D%EC%83%89-%EB%B0%98%EC%A7%9D%EC%9D%B4%EB%8A%94-cd%EC%9D%98-%EA%B0%84%EB%8B%A8%ED%95%9C-%EB%B2%A1%ED%84%B0-%ED%94%8C%EB%9E%AB-%ED%94%BD%EC%85%80-%EC%95%84%ED%8A%B8-%EC%95%84%EC%9D%B4%EC%BD%98.jpg?s=612x612&w=is&k=20&c=ARlgXEtaLQ9tiSpraflJ_sXzAIYb33fbVcNP0FvXYt0="
              id="window"
              width="25%"
              height="25%"
            />
          </div>
    </a>
    
    <!-- 팝업 -->
    <div id="pop_info_1" class="pop_wrap" style="display:none;">
        <div class="pop_inner">
            <div class="popup_box2">
              <div style="height: 10px; width: 375px; float: top">
                <a href="javascript:closePop();"
                  ><img
                    src="../assets/x.jpg"
                    class="m_header-banner-close"
                    width="30px"
                    height="30px"
                /></a>
              </div>
              <!--popup content area-->
              <div class="popup_cont2">
                <!--여기 수정하기..팝업으로 뜨게-->
                <br><br><br><br><br><br>
                <div class="midi_submit_layer">
                  <div class="submit_div">
                    <label for="upload_label">INPUT MIDI</label>
                    <br>
                    <input
                        type="file"
                        id="upload_label"
                        name="upload_label"
                        accept="audio/*"><br>
                    <br>
                    <input type="submit" value="upload">
    
                </div>
              </div>
            </div>
          </div>    
    </div>
    
    
    <script>
      var target = document.querySelectorAll('.btn_open');
      var targetID;
    
      // 팝업 열기
      for(var i = 0; i < target.length; i++){
        target[i].addEventListener('click', function(){
          targetID = this.getAttribute('href');
          document.querySelector(targetID).style.display = 'block';
        });
      }
      
      // 팝업 닫기
      for(var j = 0; j < target.length; j++){
        btnPopClose[j].addEventListener('click', function(){
          this.parentNode.parentNode.style.display = 'none';
        });
      }
    </script>
      
      
      <!--layer popup area-->
      <div class="popup_layer" id="popup_layer" style="display: none">
        <div class="popup_box">
          <div style="height: 10px; width: 375px; float: top">
            <a href="javascript:closePop();"
              ><img
                src="../assets/x.jpg"
                class="m_header-banner-close"
                width="30px"
                height="30px"
            /></a>
          </div>
          <!--layer popup content area-->
          <div class="popup_cont">
            <h5>EFFECT CONTROL</h5>
            <div class="control_panel_layer">
              <div class="control_div">
                <label class="panel_label">VOLUME</label>
                <input
                  class="panel_bar"
                  type="range"
                  id="volume_slider"
                  min="0"
                  max="100"
                  value="50"
                  onclick="volume_control(event)"
                />
              </div>
              <div class="control_div">
                <label class="panel_label">BPM</label>
                <input
                  class="panel_bar"
                  type="range"
                  id="bpm_slider"
                  min="0"
                  max="100"
                  value="50"
                  onclick="bpm_control(event)"
                />
              </div>
              <div class="control_div">
                <label class="panel_label">REVERB</label>
                <input
                  class="panel_bar"
                  type="range"
                  id="reverb_slider"
                  min="0"
                  max="100"
                  value="50"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script type="text/javascript">
        /*창문 click 시 창문 그래픽 및 ASMR 음원 변경*/
        $(function () {
          let num = 0;
          let imageName = ["1", "2", "3", "4"];
          var audio1 = document.getElementById("school");
          var audio2 = document.getElementById("rain");
          var audio3 = document.getElementById("wave");
          $("#window").click(function () {
            if (num == 0) {
              audio3.pause();
              audio2.pause();
              audio1.play();
              num++;
            } else if (num == 1) {
              audio1.pause();
              audio3.pause();
              audio2.play();
              num++;
            } else if (num == 2) {
              audio1.pause();
              audio2.pause();
              audio3.play();
              num++;
            } else {
              audio1.pause();
              audio2.pause();
              audio3.pause();
              num = 0;
            }

            $(this).attr("src", "../assets/window" + imageName[num] + ".PNG");
            audio.puase();
            audio.play();
          });
        });

        /*audio effect control popup open*/
        function openPop() {
          document.getElementById("popup_layer").style.display = "block";
        }
        /*audio effect control popup close*/
        function closePop() {
          document.getElementById("popup_layer").style.display = "none";
        }
      </script>

    <!--player room outside-->
      


    </div>
         <!--style transfer output music 재생바-->
         <link href='https://fonts.googleapis.com/css?family=Roboto:100' rel='stylesheet' type='text/css'>
         <div class="mp3-player">
            <!-- pixel audio visualization 추가...실패-->
             <div class="player">
                   <canvas></canvas>
                   <div class="playarea">
                     <div class="play" onclick="musicControl()">
                      <script>
                          var playMode = 0;
                          function play(){ //재생
                            var audio4 = document.getElementById("kpop-sample");
                            document.getElementById("kpop-sample").volume =0.1;
                            audio4.play();
                            playMode==1
                          }
                          function pause(){ //일시정지
                            var audio4 = document.getElementById("kpop-sample");
                            audio4.pause();
                            playMode==0
                          }
                          function musicControl(){ //music mode change
                              if (playMode==0){
                                play();
                                playMode=1;
                              } else {
                                pause();
                                playMode=0;
                              }
                           }
                      </script>
                     </div>
                    <div class="pause" onclick="pause()">
                    </div>
                    <div class="soundControl" id = "volume-Control">
                    <input
                      class="mp3-bar"
                      type="range"
                      id="volume-slider"
                      min="0"
                      max="100"
                      value="50"
                      onclick="volumeControl(event)"
                    />
                      <script>
                        // volume control
                        const audio = document.getElementById('kpop-sample');
                        const audioVolume = document.getElementById("volume-slider");
                        audioVolume.addEventListener("change", function(e) {
                          audio.volume = this.value/100;
                        })
                        function mute(){
                          
                        }
                      </script>
                    </div>
                   </div>
               </div>
           </div>
         </div>

    <div id="root"></div>
  </body>
</html>
