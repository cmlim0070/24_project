<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../style/player.css" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <title>캐릭캐릭뮤직체인지</title>
  </head>
  <body>
    <!--ASMR music list-->
    <audio
      id="school"
      autoplay
      loop
      src="../assets/school.mp3"
      type="audio/mpeg"
    ></audio>
    <audio
      id="rain"
      autoplay
      loop
      src="../assets/rain.mp3"
      type="audio/mpeg"
    ></audio>
    <audio
      id="wave"
      autoplay
      loop
      src="../assets/wave.mp3"
      type="audio/mpeg"
    ></audio>
    <!-- sample music -->
    <audio
    id="kpop-sample"
    autoplay
    loop
    src="../assets/Ghost of the wind.mp3"
    type="audio/mpeg">
    </audio>

    <!--inside of player room-->
    <div class="player-room">
      <div class="sample-text">플레이어 도트 그래픽 영역</div>
      <img class="sample-room" src="../assets/sample room.png" width="600" height="500">

      <!--ASMR sound btn-->
      <img src="../assets/window1.png" id="window" width="25%" height="25%" />
      <!--audio effect popup btn-->
      <a href="javascript:openPop()">
        <div>
          <img
            src="../assets/audio_effect_btn.png"
            id="window"
            width="25%"
            height="25%"
          />
        </div>
      </a>

      <!--layer popup area-->
      <div class="popup_layer" id="popup_layer" style="display: none">
        <div class="popup_box">
          <div style="height: 10px; width: 375px; float: top">
            <a href="javascript:closePop();"
              ><img
                src="../assets/x.jpg"
                class="m_header-banner-close"
                width="30px"
                height="30px"
            /></a>
          </div>
          <!--layer popup content area-->
          <div class="popup_cont">
            <h5>EFFECT CONTROL</h5>
            <div class="control_panel_layer">
              <div class="control_div">
                <label class="panel_label">VOLUME</label>
                <input
                  class="panel_bar"
                  type="range"
                  id="volume_slider"
                  min="0"
                  max="100"
                  value="100"
                  onclick="volume_control(event)"
                />
              </div>
              <div class="control_div">
                <label class="panel_label">BPM</label>
                <input
                  class="panel_bar"
                  type="range"
                  id="bpm_slider"
                  min="0"
                  max="100"
                  value="100"
                  onclick="bpm_control(event)"
                />
              </div>
              <div class="control_div">
                <label class="panel_label">REVERB</label>
                <input
                  class="panel_bar"
                  type="range"
                  id="reverb_slider"
                  min="0"
                  max="100"
                  value="100"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script type="text/javascript">
        /*창문 click 시 창문 그래픽 및 ASMR 음원 변경*/
        $(function () {
          let num = 0;
          let imageName = ["1", "2", "3", "4"];
          var audio1 = document.getElementById("school");
          var audio2 = document.getElementById("rain");
          var audio3 = document.getElementById("wave");
          $("#window").click(function () {
            if (num == 0) {
              audio3.pause();
              audio2.pause();
              audio1.play();
              num++;
            } else if (num == 1) {
              audio1.pause();
              audio3.pause();
              audio2.play();
              num++;
            } else if (num == 2) {
              audio1.pause();
              audio2.pause();
              audio3.play();
              num++;
            } else {
              audio1.pause();
              audio2.pause();
              audio3.pause();
              num = 0;
            }

            $(this).attr("src", "../assets/window" + imageName[num] + ".PNG");
            audio.puase();
            audio.play();
          });
        });

        /*audio effect control popup open*/
        function openPop() {
          document.getElementById("popup_layer").style.display = "block";
        }
        /*audio effect control popup close*/
        function closePop() {
          document.getElementById("popup_layer").style.display = "none";
        }
      </script>

    <!--player room outside-->

    </div>
         <!--style transfer output music 재생바-->
         <link href='https://fonts.googleapis.com/css?family=Roboto:100' rel='stylesheet' type='text/css'>
         <div class="mp3-player">
            <!-- audio visualization-->
             <div class="player">
                   <canvas></canvas>
                   <div class="playarea">
                     <div class="play" onclick="play()">
                      <script>
                          // style changed music play
                          function play(){
                            var audio4 = document.getElementById("kpop-sample");
                            document.getElementById("kpop-sample").volume =0.1;
                            audio4.play();
                          }
                          // volumn control
                          const audioVolume = document.getElementById('volume-control');
                          audioVolume.addEventListener("change", function(e) {
                              audio.volume = this.value/10;
                           })
                      </script>
                     </div>
                    <div class="pause" onclick="pause()">
                      <script>
                            // style changed music play
                            function play(){
                            var audio4 = document.getElementById("kpop-sample");
                            audio4.pause();
                          }
                      </script>
                    </div>
                    <div class="soundControl">


                    </div>
                   </div>
               </div>
           </div>
         </div>

    <div id="root"></div>
  </body>
</html>
